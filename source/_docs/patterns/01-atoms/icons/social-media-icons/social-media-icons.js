if (
    (typeof context == "undefined" || (typeof context != "undefined" && context == document)) // makes it work in Drupal
    && typeof window !== "undefined" // makes it work in Node.js server side rendering
    ) {
        const social_template = document.createElement("template");
        social_template.innerHTML = `
        <!--link rel="stylesheet" href="https://ashlar.blob.core.windows.net/ashlar-theme-files/css/components/social-media-icons.css" /-->

        <a class="wwu-social-link">
        <span class="visually-hidden"></span>
        <div class="wwu-social-icon">
        </div>
        </a>
        
        `;
        
        class WWUSocial extends HTMLElement {
            constructor() {
                super();
            }
            
            connectedCallback() {
                /* Create the custom element by appending the template */
                this.appendChild(social_template.content.cloneNode(true));
                
                const url = this.getAttribute("url");                
                const [icon, label] = select_icon(url);
                
                this.querySelector(".wwu-social-link").setAttribute("href", url);
                this.querySelector(".wwu-social-icon").innerHTML = icon;
                this.querySelector(".wwu-social-icon").classList.add(this.getAttribute("size"));
                this.querySelector(".visually-hidden").innerText= this.getAttribute("group") + " on " + label;
            }
        }
        
        window.customElements.define("wwu-social", WWUSocial);
        
        function select_icon(url) {
            if (url.includes("facebook")) {
                return [`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 135 135"><path class="wwu-icon-cls-1" d="M135,67.5a67.5,67.5,0,1,0-78,66.68V87H39.81V67.5H57V52.63C57,35.71,67,26.37,82.45,26.37a103.77,103.77,0,0,1,15.11,1.32V44.3H89.05c-8.39,0-11,5.2-11,10.54V67.5H96.77L93.77,87H78.05v47.17A67.51,67.51,0,0,0,135,67.5Z"/><path class="wwu-icon-cls-2" d="M93.77,87l3-19.51H78.05V54.84c0-5.34,2.61-10.54,11-10.54h8.51V27.69a103.77,103.77,0,0,0-15.11-1.32C67,26.37,57,35.71,57,52.63V67.5H39.81V87H57v47.17a68.28,68.28,0,0,0,21.1,0V87Z"/></svg>`, `Facebook`];
            }
            if (url.includes("flickr")) {
                return [`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 135 135"><circle class="wwu-icon-cls-1" cx="67.5" cy="67.5" r="67.5"/><circle class="wwu-icon-cls-2" cx="41.46" cy="67.64" r="20.99"/><circle class="wwu-icon-cls-2" cx="93.64" cy="67.64" r="20.99"/></svg>`, `Flickr`];
            }
            if (url.includes("instagram")) {
                return [`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 135 135"><circle class="wwu-icon-cls-1" cx="67.5" cy="67.5" r="67.5"/><path class="wwu-icon-cls-2" d="M67.5,32.66c11.35,0,12.69,0,17.17.25a23.4,23.4,0,0,1,7.9,1.46,14.11,14.11,0,0,1,8.06,8.06,23.4,23.4,0,0,1,1.46,7.9c.21,4.48.25,5.82.25,17.17s0,12.69-.25,17.17a23.4,23.4,0,0,1-1.46,7.9,14.11,14.11,0,0,1-8.06,8.06,23.4,23.4,0,0,1-7.9,1.46c-4.48.21-5.82.25-17.17.25s-12.69,0-17.17-.25a23.4,23.4,0,0,1-7.9-1.46,14.11,14.11,0,0,1-8.06-8.06,23.4,23.4,0,0,1-1.46-7.9c-.21-4.48-.25-5.82-.25-17.17s0-12.69.25-17.17a23.4,23.4,0,0,1,1.46-7.9,14.11,14.11,0,0,1,8.06-8.06,23.4,23.4,0,0,1,7.9-1.46c4.48-.21,5.82-.25,17.17-.25m0-7.66c-11.54,0-13,.05-17.52.26a31,31,0,0,0-10.32,2A21.7,21.7,0,0,0,27.23,39.66a31,31,0,0,0-2,10.32C25.05,54.51,25,56,25,67.5s.05,13,.26,17.52a31,31,0,0,0,2,10.32,21.7,21.7,0,0,0,12.43,12.43,31,31,0,0,0,10.32,2c4.53.21,6,.26,17.52.26s13,0,17.52-.26a31,31,0,0,0,10.32-2,21.7,21.7,0,0,0,12.43-12.43,31,31,0,0,0,2-10.32c.21-4.53.26-6,.26-17.52s0-13-.26-17.52a31,31,0,0,0-2-10.32A21.7,21.7,0,0,0,95.34,27.23a31,31,0,0,0-10.32-2C80.49,25.05,79,25,67.5,25Z"/><path class="wwu-icon-cls-2" d="M67.5,45.68A21.82,21.82,0,1,0,89.32,67.5,21.82,21.82,0,0,0,67.5,45.68Zm0,36A14.17,14.17,0,1,1,81.67,67.5,14.18,14.18,0,0,1,67.5,81.67Z"/><circle class="wwu-icon-cls-2" cx="90.19" cy="44.81" r="5.1"/></svg>`, `Instagram`];
            }
            if (url.includes("linkedin")) {
                return [`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 135 135"><circle class="wwu-icon-cls-1" cx="67.5" cy="67.5" r="67.5"/><path class="wwu-icon-cls-2" d="M72.72,58.29c1.11-1.24,2-2.51,3.16-3.58a17.3,17.3,0,0,1,12.48-4.92,28.74,28.74,0,0,1,7.84,1c5.86,1.69,9.27,5.73,10.89,11.45a48,48,0,0,1,1.45,13.12c0,9.32,0,18.65,0,28,0,.88-.24,1.1-1.1,1.1q-7.2-.06-14.41,0c-.84,0-1-.26-1-1Q92,90,92,76.71a24.16,24.16,0,0,0-.77-6.61c-1.15-4-4-6-8.17-5.79-5.7.3-8.66,3.12-9.39,8.91a34.19,34.19,0,0,0-.25,4.17c0,8.62,0,17.25,0,25.88,0,.86-.21,1.12-1.09,1.11q-7.26-.06-14.52,0c-.77,0-1-.21-1-1q0-25.64,0-51.25c0-.85.28-1,1.08-1,4.59,0,9.19,0,13.78,0,.85,0,1.07.26,1,1.06C72.69,54.21,72.72,56.25,72.72,58.29Z"/><path class="wwu-icon-cls-2" d="M46.4,77.81c0,8.46,0,16.91,0,25.36,0,.94-.23,1.22-1.2,1.21-4.8,0-9.6,0-14.4,0-.77,0-1-.19-1-1q0-25.67,0-51.33c0-.71.17-1,.92-1,4.87,0,9.75,0,14.62,0,.93,0,1.06.35,1.06,1.15C46.39,60.77,46.4,69.29,46.4,77.81Z"/><path class="wwu-icon-cls-2" d="M47.73,34.14a9.6,9.6,0,1,1-9.58-9.54A9.62,9.62,0,0,1,47.73,34.14Z"/></svg>`, `LinkedIn`];
            }
            if (url.includes("pinterest")) {
                return [`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 135 135.22"><path class="wwu-icon-cls-1" d="M67.56,0A67.58,67.58,0,0,0,42.92,130.5c-.61-5.34-1.11-13.57.23-19.41C44.37,105.81,51,77.51,51,77.51a24.63,24.63,0,0,1-2-10c0-9.4,5.45-16.4,12.23-16.4,5.79,0,8.57,4.33,8.57,9.51,0,5.78-3.67,14.45-5.62,22.51-1.61,6.73,3.39,12.24,10,12.24,12,0,21.24-12.68,21.24-30.92C95.47,48.26,83.85,37,67.22,37,48,37,36.7,51.38,36.7,66.28c0,5.78,2.22,12,5,15.4a2,2,0,0,1,.45,1.94c-.5,2.12-1.67,6.73-1.89,7.68-.28,1.22-1,1.5-2.28.89C29.52,88.24,24.24,76,24.24,66c0-21.3,15.46-40.87,44.65-40.87,23.41,0,41.65,16.68,41.65,39,0,23.3-14.68,42-35,42-6.84,0-13.29-3.56-15.46-7.79,0,0-3.39,12.9-4.23,16.07-1.5,5.9-5.61,13.24-8.39,17.74A67.62,67.62,0,1,0,67.56,0Z"/></svg>`, `Pinterest`];
            }
            if (url.includes("snapchat")) {
                return [`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 135 135"><circle class="wwu-icon-cls-1" cx="67.5" cy="67.5" r="67.5"/><path class="wwu-icon-cls-2" d="M90.75,51.58c0,1.85-.11,3.71-.25,5.56,0,.31,0,.63,0,.94,0,.69.39,1,1.07.91a3.18,3.18,0,0,0,.74-.17l2-.74A27.24,27.24,0,0,1,97.69,57a5.18,5.18,0,0,1,2.38-.09,2.87,2.87,0,0,1,2.06,4,4,4,0,0,1-.79,1.21,8.23,8.23,0,0,1-1.58,1.36l-2.05,1.36L94.28,67c-.47.32-.93.65-1.38,1a5.23,5.23,0,0,0-.69.64,2.24,2.24,0,0,0-.59,1.69,8.5,8.5,0,0,0,.32,1.8,22.3,22.3,0,0,0,2.38,5.35,30.62,30.62,0,0,0,7.06,8,40.13,40.13,0,0,0,7.73,4.88c.25.12.49.26.72.39a1.46,1.46,0,0,1,.46.43.74.74,0,0,1,.06.83,2.12,2.12,0,0,1-.54.61,6,6,0,0,1-1,.65,22.46,22.46,0,0,1-4.94,1.91c-.73.2-1.46.41-2.18.63a8.4,8.4,0,0,0-1.45.61,2.61,2.61,0,0,0-1.41,1.92c-.09.47-.15,1-.23,1.43a1.9,1.9,0,0,1-1.83,1.85,10.55,10.55,0,0,1-1.26.13c-1,.06-2.1.09-3.15.15a26.88,26.88,0,0,0-7,1.25,14,14,0,0,0-2.77,1.23c-.93.53-1.85,1.09-2.77,1.64a28.65,28.65,0,0,1-4.54,2.34,19.8,19.8,0,0,1-5.52,1.28,24,24,0,0,1-4.79-.06,19.37,19.37,0,0,1-6.8-2.06c-1-.51-1.95-1.08-2.9-1.66l-2.11-1.27a18.23,18.23,0,0,0-5.41-2.06,31,31,0,0,0-5.26-.65l-2.78-.13a8.16,8.16,0,0,1-1.56-.23,1.68,1.68,0,0,1-1.33-1.37c-.08-.41-.15-.83-.22-1.24l0-.25a2.86,2.86,0,0,0-1.74-2.39,13.31,13.31,0,0,0-2-.7c-1.16-.32-2.33-.61-3.46-1a21.77,21.77,0,0,1-2.88-1.28c-.28-.16-.55-.32-.81-.5a3.09,3.09,0,0,1-.48-.4.92.92,0,0,1,.12-1.55,5.71,5.71,0,0,1,1-.56,39.43,39.43,0,0,0,6.82-4.2,31.07,31.07,0,0,0,7.65-8.35,22.74,22.74,0,0,0,2.52-5.57,7.72,7.72,0,0,0,.33-1.92A2.23,2.23,0,0,0,43,68.6a6.71,6.71,0,0,0-.85-.75c-.88-.66-1.8-1.26-2.71-1.86L36,63.71a11.87,11.87,0,0,1-1.65-1.27,6.05,6.05,0,0,1-1-1.17,3,3,0,0,1-.17-2.85A2.52,2.52,0,0,1,34.66,57,4.32,4.32,0,0,1,37,56.83a14.73,14.73,0,0,1,2.67.75c.89.32,1.77.67,2.66,1a6.11,6.11,0,0,0,1.26.38,1.75,1.75,0,0,0,.32,0c.51,0,.93-.18.92-.86s0-1.14-.06-1.71a86.11,86.11,0,0,1-.17-9.23,32.61,32.61,0,0,1,.72-5.82,18.82,18.82,0,0,1,3.38-7.28,21.87,21.87,0,0,1,11.92-8,26.45,26.45,0,0,1,8.07-.91A25,25,0,0,1,77,26.92,21.31,21.31,0,0,1,84,31.16a19.56,19.56,0,0,1,5.55,8.46,25.42,25.42,0,0,1,1,4.63A57.89,57.89,0,0,1,90.75,51.58Z"/></svg>`, `Snapchat`];
            }
            if (url.includes("tiktok")) {
                return [`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 135 135"><circle class="wwu-icon-cls-1" cx="67.5" cy="67.5" r="67.5"/><path class="wwu-icon-cls-2" d="M105.32,45.19c0-.39,0-.4-.42-.4a18.15,18.15,0,0,1-2.94-.26C98.43,44,87,38,85,28.16a30,30,0,0,1-.47-3.67c0-.46,0-.46-.46-.47H70.34c-.9,0-.77-.11-.77.79q0,29.16,0,58.33a12,12,0,0,1-.15,2.16,12.64,12.64,0,0,1-15,10.31,18,18,0,0,1-3-1,2.39,2.39,0,0,0-.23-.22c-.33-.27-.68-.49-1-.74-4.15-2.87-6.12-6.86-5.52-11.85S48.19,73.34,53,71.57a11.13,11.13,0,0,1,4.47-.67,13.24,13.24,0,0,1,2.92.45c.33.09.51,0,.52-.37,0-.13,0-.25,0-.37,0-3.49-.13-11.12-.14-11.13,0-1,0-2,0-3,0-.29-.14-.34-.38-.36A28.25,28.25,0,0,0,55,56a27.71,27.71,0,0,0-7.31,1.55,27.41,27.41,0,0,0-18.1,24,26.58,26.58,0,0,0,.05,4.28,27,27,0,0,0,1.16,5.79A27.32,27.32,0,0,0,40.08,105a6.31,6.31,0,0,0,1.42,1h0l.69.61a14.93,14.93,0,0,0,2.29,1.4,27.46,27.46,0,0,0,15.76,2.79A27.69,27.69,0,0,0,84.73,83.26c.06-9.68,0-19.36,0-29.05,0-.23-.13-.56.12-.67s.4.17.59.3a35.92,35.92,0,0,0,11.7,5,32.63,32.63,0,0,0,7.44.89c.79,0,.9,0,.9-.83C105.5,55.51,105.32,46.11,105.32,45.19Z"/></svg>`, `TikTok`];
            }
            if (url.includes("threads")) {
                return [`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 135 135"><circle class="wwu-icon-cls-1" cx="67.5" cy="67.5" r="67.5"/><path class="wwu-icon-cls-2" d="M90.4,64.1c-0.4-0.2-0.9-0.4-1.3-0.6c-0.8-14-8.4-22-21.2-22.1c-0.1,0-0.1,0-0.2,0c-7.7,0-14.1,3.3-18,9.2l7.1,4.8c2.9-4.5,7.5-5.4,10.9-5.4c0,0,0.1,0,0.1,0c4.2,0,7.4,1.3,9.5,3.7c1.5,1.7,2.5,4.2,3,7.2c-3.7-0.6-7.8-0.8-12.1-0.6c-12.2,0.7-20,7.8-19.5,17.7c0.3,5,2.8,9.3,7,12.1c3.6,2.4,8.3,3.5,13.1,3.3c6.4-0.3,11.4-2.8,14.9-7.2c2.7-3.4,4.3-7.8,5.1-13.3c3,1.8,5.3,4.2,6.5,7.2c2.1,4.9,2.2,13-4.4,19.7c-5.8,5.8-12.8,8.3-23.3,8.4c-11.7-0.1-20.5-3.8-26.3-11.1c-5.4-6.8-8.2-16.7-8.3-29.4c0.1-12.6,2.9-22.5,8.3-29.4c5.7-7.3,14.6-11,26.3-11.1c11.8,0.1,20.8,3.9,26.7,11.2c2.9,3.6,5.1,8.1,6.6,13.4l8.3-2.2c-1.8-6.5-4.5-12.1-8.3-16.7C93.2,23.5,82,18.6,67.6,18.5h-0.1c-14.4,0.1-25.4,4.9-32.9,14.4c-6.6,8.4-10,20.1-10.1,34.7l0,0l0,0c0.1,14.7,3.5,26.3,10.1,34.7c7.4,9.4,18.5,14.3,32.9,14.4h0.1c12.8-0.1,21.8-3.4,29.2-10.9c9.7-9.7,9.4-21.9,6.2-29.3C100.7,71.3,96.4,67,90.4,64.1z M68.3,84.9c-5.3,0.3-10.9-2.1-11.2-7.2c-0.2-3.8,2.7-8.1,11.5-8.6c1-0.1,2-0.1,3-0.1c3.2,0,6.2,0.3,8.9,0.9C79.5,82.5,73.5,84.6,68.3,84.9z"/></svg>`, `Threads`];
            }
            if (url.includes("twitter")) {
                return [`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 135 135"><circle class="wwu-icon-cls-1" cx="67.5" cy="67.5" r="67.5"/><path class="wwu-icon-cls-2" d="M76,62.4l28.6-32.6h-6.8L73,58.1L53.2,29.8H30.3l30,42.7l-30,34.1h6.8l26.2-29.9l20.9,29.9h22.9 M39.5,34.8h10.4L97.9,102H87.4"/></svg>`, `Twitter`];
            }
            if (url.includes("vimeo")) {
                return [`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 135 135"><circle class="wwu-icon-cls-1" cx="67.5" cy="67.5" r="67.5"/><path class="wwu-icon-cls-2" d="M111.11,46.36q-.61,13.28-18.56,36.37Q74,106.85,61.15,106.85q-8,0-13.46-14.69L40.34,65.23q-4.08-14.69-8.76-14.69c-.69,0-3.07,1.44-7.15,4.29l-4.28-5.51Q26.9,43.4,33.43,37.48q9-7.77,13.49-8.18,10.62-1,13.07,14.52,2.65,16.77,3.68,20.86,3.08,13.91,6.75,13.91,2.85,0,8.58-9t6.12-13.74C85.67,50.63,83.62,48,79,48a17.07,17.07,0,0,0-6.74,1.49q6.7-22,25.63-21.35Q111.92,28.58,111.11,46.36Z"/></svg>`, `Vimeo`];
            }
            if (url.includes("youtube")) {
                return [`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 135 135"><circle class="wwu-icon-cls-1" cx="67.5" cy="67.5" r="67.5"/><path class="wwu-icon-cls-2" d="M110.62,45.84a11.3,11.3,0,0,0-8-8C95.64,36,67.5,36,67.5,36s-28.14,0-35.16,1.88a11.3,11.3,0,0,0-8,8c-1.88,7-1.88,21.66-1.88,21.66s0,14.64,1.88,21.66a11.3,11.3,0,0,0,8,8C39.36,99,67.5,99,67.5,99s28.14,0,35.16-1.88a11.3,11.3,0,0,0,8-8c1.88-7,1.88-21.66,1.88-21.66S112.5,52.86,110.62,45.84ZM58.5,81V54L81.88,67.5Z"/></svg>`, `YouTube`];
            }
        }
    }
    